# https://github.com/traefik/traefik-helm-chart/blob/master/traefik/values.yaml
logs:
  general:
    level: "INFO" # DEBUG if necessary
ingressRoute:
  dashboard:
    enabled: true
    matchRule: Host(`mon.rudenspavasaris.id.lv`)
    entryPoints:
      - websecure
    tls:
      certResolver: letsencrypt
providers:
  kubernetesGateway:
    enabled: true
gateway:
  listeners:
    web:
      namespacePolicy:
        from: All
hostNetwork: true
ports:
  traefik:
    port: 8081
    exposedPort: 8081
  web:
    redirections:
      entryPoint:
        to: websecure
        scheme: https
        permanent: true
  websecure:
    port: 6443
service:
  externalIPs: [129.151.200.81]

certificatesResolvers:
  letsencrypt:
    acme:
      email: "rihards.teteris@outlook.com"
      storage: /acme/acme.json
      tlsChallenge: true
### TODO: Replace this with proper persistent volume.
# Given that my nodes currently are super tiny, probably won't use Longhorn at the moment
# Try https://kubernetes.io/docs/concepts/storage/volumes/#local
deployment:
  additionalVolumes:
    - name: acme
      hostPath:
        path: /acme
additionalVolumeMounts:
  - name: acme
    mountPath: /acme/
